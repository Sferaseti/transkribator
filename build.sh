#!/bin/bash

# Установка зависимостей для сборки
npm install

# Очистка старой сборки
rm -rf dist

# Сборка приложения
npm run dist

# Удаление старого ярлыка, если существует
rm -f ~/Desktop/Транскрибатор.app

# Создание символической ссылки на рабочем столе
if [ -d "dist/mac-arm64/Транскрибатор.app" ]; then
    ln -s "$(pwd)/dist/mac-arm64/Транскрибатор.app" ~/Desktop/Транскрибатор.app
    echo "Приложение собрано и создан ярлык на рабочем столе"
    echo "Вы также можете найти установщик DMG в папке dist/"
else
    echo "Ошибка: Сборка приложения не удалась"
    exit 1
fi